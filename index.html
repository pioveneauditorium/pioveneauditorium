<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auditorium Piovene Rocchette</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="logo">
      <img src="logo.png" alt="Logo Auditorium">
    </div>
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <nav id="nav-menu">
      <div class="close-menu" id="close-menu">&times;</div>
      <ul>
        <li><a href="chi-siamo.html">Chi siamo</a></li>
        <li><a href="contatti.html">Contatti</a></li>
        <li><a href="cinema.html">Cinema</a></li>
        <li><a href="musica.html">Musica</a></li>
        <li><a href="teatro.html">Teatro</a></li>
        <li><a href="incontri.html">Incontri</a></li>
        <li><a href="ragazzi.html">Ragazzi</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero">
      <h1>Benvenuti all'Auditorium di Piovene Rocchette</h1>
      <p>Scopri gli eventi di cinema, musica, teatro e molto altro.</p>
    </section>

    <!-- Carosello eventi dinamico -->
    <section class="events-carousel">
      <h2>Prossimi Eventi</h2>
      <div class="carousel">
        <button class="prev">&#10094;</button>
        <div class="carousel-track">
          <!-- Slide generate dinamicamente dal CSV -->
        </div>
        <button class="next">&#10095;</button>
      </div>
    </section>
  </main>

  <footer>
  <img src="footer.png" alt="Footer" class="footer-img">
  <p>&copy; 2025 Auditorium Piovene Rocchette</p>
</footer>

  <script src="script.js"></script>
  <script>
    // Hamburger menu
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('nav-menu');
    const closeMenu = document.getElementById('close-menu');

    hamburger.addEventListener('click', () => {
      navMenu.style.height = '100%';
    });
    closeMenu.addEventListener('click', () => {
      navMenu.style.height = '0';
    });

    // Carosello dinamico
    const track = document.querySelector('.carousel-track');
    const prevButton = document.querySelector('.prev');
    const nextButton = document.querySelector('.next');
    let currentIndex = 0;

    function updateCarousel() {
      track.style.transform = `translateX(-${currentIndex * 100}%)`;
    }

    prevButton.addEventListener('click', () => {
      currentIndex = (currentIndex === 0) ? track.children.length - 1 : currentIndex - 1;
      updateCarousel();
    });

    nextButton.addEventListener('click', () => {
      currentIndex = (currentIndex === track.children.length - 1) ? 0 : currentIndex + 1;
      updateCarousel();
    });

    // Fetch CSV Google Sheet e popola il carosello
    fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vTsHetVu62LIgBfbWqJ9AX5vRjWJBiN01Wspsj51i8nr9z5pWKqVb2jG3Zy_aAwJKjN0OiYxZ4mx9-1/pub?output=csv')
      .then(response => response.text())
      .then(data => {
        const rows = data.split('\n').slice(1); // Salta intestazione
        rows.forEach(row => {
          if (!row.trim()) return; // salta righe vuote
          const [immagine, titolo, dataEvento, orario, descrizione] = row.split(',');

          const item = document.createElement('div');
          item.className = 'carousel-item';

          const img = document.createElement('img');
          img.src = immagine.trim();
          img.alt = titolo.trim();

          const caption = document.createElement('div');
          caption.className = 'carousel-caption';
          caption.innerHTML = `<h3>${titolo.trim()}</h3>
                               <p>${dataEvento.trim()} ${orario.trim()}</p>
                               <p>${descrizione.trim()}</p>`;

          item.appendChild(img);
          item.appendChild(caption);
          track.appendChild(item);
        });
        updateCarousel();
      })
      .catch(err => console.error('Errore nel caricamento CSV:', err));
  </script>
</body>
</html>
